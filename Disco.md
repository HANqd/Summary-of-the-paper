## Disco: Running Commodity Operating Systems on Scalable Multiprocessors

这是关于虚拟机的一篇论文，年份久远，是1997年收录在ACM的一篇文章。</br>
【Author】：EDOUARD BUGNION, SCOTT DEVINE, KINSHUK GOVIL, and MENDEL ROSENBLUM 。 </br>
【Stanford University】</br>

---

__Abstract:__

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在本文中，我们研究了扩展现代操作系统以在大型共享内存多处理器上有效运行而无需花费大量实现精力的问题。我们的方法带回了1970年代流行的想法：虚拟机监视器。我们使用虚拟机在可伸缩的多处理器上运行多个商品操作系统。该解决方案解决了这些机器的系统软件所面临的许多挑战。我们用称为Disco的原型演示了我们的方法，该原型在多处理器上运行Silicon Graphics的IRIX操作系统的多个副本。我们的经验表明，监视器的开销很小，并且该方法提供了可扩展性以及处理这些系统不均匀的内存访问时间的能力。为了减少与运行多个操作系统相关的内存开销，虚拟机透明地共享主要数据结构，例如程序代码和文件系统缓冲区高速缓存。我们使用现代操作系统的分布式系统支持将部分单个系统映像导出给用户。整体解决方案可以实现为可扩展多处理器定制的操作系统的大多数优点，但是可以通过大大减少的实现工作来实现。</p>

__Additional Key Words and Phrases:__

<p>Scalable multiprocessors（可扩展的多处理器）, virtual machines（虚拟机）</p>
补充知识点：可扩展性是指适应变化的能力。软件环境的变化（可能是业务环境，运行环境）导致软件要进行改动才能满足人们对它的要求，这种系统本身适应变化的能力就是可扩展性。

---

__1.Introduction:__

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可扩展的计算机已经从实验室转到市场，多个供应商现在推出具有数十甚至数百个处理器配置的可扩展系统，但是在达到现代计算机用户所期望的功能和稳定性上，这些机器的软件常常落后于其硬件，则需要对操作系统进行大量的修改来有效的支持可扩展机器。现代操作系统的规模和复杂性使得这些修改成为一项资源密集型的工作。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在这篇论文中，我们提出了一种为这些大型计算机构建系统软件的替代方法。不是对现有操作系统进行大量修改，而是在硬件和操作系统之间插入一层额外的软件，这一层的作用类似于虚拟机监视器，因为“商品”操作系统的多个副本可以在一台可扩展的计算机上运行，允许这些商品操作系统之间有效的合作和共享资源。所得到的系统包含专门针对这些机器开发的定制可扩展操作系统的大部分特征，其复杂性和实施成本仅为一小部分。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了演示该方法，我们构建了一个针对斯坦福FLASH共享内存多处理器的原型系统，一个实验的高速缓存相干的非均匀存储结构机器(CC-NUMA)。这个原型称为Disco，结合商品操作系统，形成一个高性能的系统软件基础，而不是最初设计的大规模多处理器。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disco减少或消除了传统的虚拟机监视器的一些问题。</br>
（1）它最小化了虚拟机的开销，增强了运行在同一系统上的虚拟机之间的资源共享。</br>
（2）允许在不同虚拟机上运行的操作系统使用标准的分布式系统协议(如tcp/ip和nfs)进行耦合。</br>
（3）它还允许虚拟机之间高效地共享内存和磁盘资源。</br>
共享支持使Disco可以维护全局缓冲区缓存，即使所有虚拟机通过标准分布式协议进行通信，该缓冲区也可以由所有虚拟机透明共享。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们在FLASH机器的详细模拟器上进行的实际工作量实验表明，Disco实现了其目标。 通过对现有的商用操作
系统进行一些简单的修改，对于我们所有的单处理器工作负载，虚拟化的基本开销从3％到16％不等。我们表明，通过增加系统软件的可伸缩性，在不大幅增加系统内存
占用的情况下，具有八个虚拟机的系统可以比商用对称多处理器操作系统运行某些工作负载快1.7倍。最后，我们证明了页面放置以及动态页面迁移和复制使Disco可以
隐藏内存系统的NUMA-ness，从而将执行时间减少多达37％。 在单处理器SGI机器上的早期实验证实了基于仿真的结果。</br
【注释】：这里的NUMA，因为同一时间只能有一个处理器访问计算机的存储器，所以在一个系统中可能存在多个处理器在等待访问存储器。NUMA通过提供分离的存储器给各个处理器，避免当多个处理器访问同一个存储器产生的性能损失来试图解决这个问题。对于涉及到分散的数据的应用（在服务器和类似于服务器的应用中很常见），NUMA可以通过一个共享的存储器提高性能至n倍,而n大约是处理器（或者分离的存储器）的个数。当然，不是所有数据都局限于一个任务，所以多个处理器可能需要同一个数据。为了处理这种情况，NUMA系统包含了附加的软件或者硬件来移动不同存储器的数据。这个操作降低了对应于这些存储器的处理器的性能，所以总体的速度提升受制于运行任务的特点。
</p>

__2.Problem description:__

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;更详细的介绍要解决的问题。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于共享内存多处理器，研究团队已经证明以前的系统原型有错误围堵技术和可扩展性方面的挑战，例如Hive和Hurricane系统原型。（错误围堵技术：建立有效的资源管理器，分割、调度机器资源，把物理资源提供给虚拟机器，平衡错误围堵与其他的性能要求。其作用是：即使在系统中某些部分出错的情况下，依然不影响系统的整体性能。）操作系统为了支持共享内存机器，就需要很大的os改变，包括把系统划分为可扩展的单元，建立一个可跨越单元的系统镜像，以及其他功能，如错误围堵技术和CC-NUMA管理。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对CC-NUMA的更改需要很大的开发成本，而这些改变会影响构成现代系统的标准模块，如虚拟内存管理和调度程序。即使这些改变是功能完整的，但是也可能在一段时间内引入不稳定性因素。</br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不论硬件如何创新，过时的，不兼容的，甚至可能有故障的系统软件都可能严重影响此类机器的成功。用户需要高度可靠和可用的计算机系统。而对于一些应用领域，对实现计算机的可靠性的成本比硬件创新的收益还高。
